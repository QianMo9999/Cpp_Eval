# 更新日志

## v1.4.0 (2024-10-29) - DeepSeek Reasoner & 批量评价优化

### 🚀 重大功能更新
- **DeepSeek Reasoner支持**：新增对DeepSeek推理模型的完整支持
  - 自动处理推理内容（reasoning_content）
  - 智能提取评价结果，避免内容截断
  - 支持更高的token限制（8000 tokens）
  - 推理质量显著提升

### 🔧 批量评价系统优化
- **智能解析引擎**：全面重构批量评价解析逻辑
  - 支持多种分隔符格式（===、### 题目N:、题目标题模式）
  - 智能段落重组，确保评价内容完整
  - 自动容错处理，避免解析失败
  - 详细的解析过程日志

### 📄 PDF生成系统增强
- **实时PDF生成**：评价完一个学生立即生成PDF报告
- **内容完整性保障**：移除错误的长度判断逻辑
- **格式优化**：支持Markdown格式转换、中文字体、表格布局
- **错误容错**：解析失败时自动降级为纯文本显示

### 🔍 调试和监控系统
- **详细调试信息**：
  - API响应状态和内容长度显示
  - 评价内容预览和分割过程日志
  - 每道题的解析结果预览
  - 推理内容长度统计
- **智能错误诊断**：自动检测并报告常见问题
- **实时进度反馈**：显示评价进度和PDF生成状态

### 🛠️ 技术改进
- **API调用优化**：
  - 增加max_tokens到8000，支持更长评价
  - 改进DeepSeek API响应处理逻辑
  - 支持reasoning_content字段提取
- **容错机制增强**：
  - 多重分割策略，确保内容解析成功
  - 默认评价内容生成，避免空白结果
  - 智能分数推断和默认值设置

### 📝 文档更新
- **README.md**：全面更新，添加最新功能说明
- **requirements.txt**：添加dashscope依赖
- **调试指南**：新增详细的故障排除说明

### 🐛 问题修复
- ✅ 修复DeepSeek Reasoner模型返回内容为空的问题
- ✅ 修复批量评价解析失败导致的评价内容不完整
- ✅ 修复PDF生成时"评价内容较短"的错误提示
- ✅ 修复分数提取不准确的问题
- ✅ 修复特殊字符在PDF中显示异常的问题

---

## v1.3.1 (2024) - 实时PDF生成

### 🆕 新增功能
- **实时PDF生成**：评价完一个学生立即生成PDF，无需等待所有人评价完成
- **批量评价模式**：每个学生只调用一次API，一次性评价所有题目
- **智能内容解析**：自动分割批量评价结果，提取每道题的评价内容

### 📊 性能优化
- 提升评价效率：减少API调用次数
- 改进用户体验：实时反馈，中断友好
- 优化内存使用：流式处理，避免内存积累

---

## v1.2.0 (2024) - 多格式输出支持

### 🆕 新增功能
- **PDF报告生成**：为每个学生生成精美的PDF评价报告
- **Excel汇总表格**：支持生成包含所有学生评价的Excel文件
- **JSON数据导出**：便于后续数据处理和分析

### 🎨 界面优化
- PDF报告支持中文字体和表格布局
- Excel表格包含详细的评价信息和统计数据
- 改进命令行输出格式和进度显示

---

## v1.1.0 (2024) - 新增DeepSeek支持

### 🆕 新增功能
- **DeepSeek API支持**：新增对DeepSeek大模型的支持
  - 性价比极高（比GPT-4便宜10-20倍）
  - 代码能力强，特别适合C++作业评价
  - 国内访问稳定，无需特殊网络环境
  - 响应速度快

### 📝 文档更新
- 新增 `DEEPSEEK_GUIDE.md`：DeepSeek API详细配置指南
- 更新 `README.md`：添加DeepSeek使用说明
- 更新 `QUICKSTART.md`：推荐使用DeepSeek
- 更新 `.env.example`：添加DeepSeek配置示例

### 🔧 代码优化
- `src/llm_evaluator.py`：添加 `DeepSeekEvaluator` 类
- `src/main.py`：命令行参数支持deepseek选项
- 新增 `test_api.py`：API配置测试工具

### 📊 支持的API提供商
- ✅ DeepSeek（推荐）
- ✅ OpenAI (GPT-4, GPT-3.5)
- ✅ Anthropic Claude
- ✅ 阿里云通义千问

### 🎯 最佳实践建议
- 首选DeepSeek Reasoner：推理能力强，评价质量高
- DeepSeek Chat：适合预算有限、批量处理的场景
- GPT-4：追求最佳质量但成本较高
- Claude：长文本处理优势

---

## v1.0.0 (2024) - 首次发布

### ✨ 核心功能
- ZIP文件自动解压和扫描
- 智能识别学生姓名
- 支持多种C++文件格式（.cpp, .cc, .h等）
- 大模型API集成（OpenAI、Claude、通义千问）
- 自定义评价提示词
- 生成Markdown格式的评价报告
- 导出Excel汇总表格
- JSON格式数据导出

### 📦 项目结构
- 模块化设计，易于维护和扩展
- 完整的配置文件系统
- 详细的使用文档

### 🛠️ 开发工具
- 快速启动脚本（run.sh / run.bat）
- 环境变量配置（.env）
- Git忽略文件配置

### 📚 文档
- README.md：完整使用文档
- QUICKSTART.md：快速开始指南
- data/README.md：数据文件组织说明

---

## 🗺️ 路线图

### v1.5.0 计划中
- [ ] 支持更多推理模型（Claude-3.5、GPT-4o等）
- [ ] 代码相似度检测功能
- [ ] 批量并发处理优化
- [ ] Web界面支持
- [ ] 历史记录管理

### 未来计划
- [ ] 支持更多编程语言（Python, Java等）
- [ ] 自定义评分标准配置
- [ ] 学生作业对比功能
- [ ] 邮件自动发送功能
- [ ] 更多本地大模型支持
- [ ] Docker容器化部署

### 欢迎贡献
如果你有好的想法或发现了bug，欢迎提Issue或Pull Request！

---

## 📞 技术支持

- 🐛 **问题反馈**：请在GitHub Issues中报告
- 📖 **使用文档**：查看README.md和相关文档
- 🔧 **故障排除**：参考TROUBLESHOOTING.md
- 💡 **功能建议**：欢迎在Issues中提出